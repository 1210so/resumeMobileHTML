<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <title>12쉽소 이력서 출력 A4</title>
    <link rel="stylesheet" href="12style_A4.css">
</head>
<body>
    <button id="topdfButton" onclick="downloadPDF()" data-html2canvas-ignore="true">PDF로 다운로드</button>
    <section class="page">
        <div id="topBackground"><p id="logo">12쉽소</p></div>
        <table class="topTable">
            <tr>
                <td class="leftColumn"> 
                    <!-- <img src="SampleImage.jpeg" style="width:120px; height:160px"> -->
                    <div style="width:120px; height:160px; background-color:black;"> . </div>
                </td>
                <td class="centerColumn">
                    <div class="topHighlightTextSmall">{자기소개 멘트}</div>
                    <div class="topHighlightTextLarge">{name}</div>
                </td>
                <td class="rightColumn">
                    <div class="roundBoxinRow" style="margin-bottom : 8px;"><p class="infoText">{Personality 1}</p></div>
                    <div class="roundBoxinRow" style="margin-bottom : 8px;"><p class="infoText">{Personality 2}</p></div>
                    <div class="roundBoxinRow" style="margin-bottom : 8px;"><p class="infoText">{Personality 3}</p></div>
                </td>
            </tr>
        </table>
        
        <div class="infoBox"><div class="infoLine" style="border-top: 4px solid #001ED6;"></div></div>
        <div class="infoBox">
            <table class="infoTable">
                <tr>
                    <td class="leftInfoSide">인적사항</td>
                    <td class="rightInfoSide">
                        <table class="infoTable">
                            <tr>
                                <td class="rightLeftInfo">
                                    <div class="roundBox">이름</div>
                                </td>
                                <td class="rightRightInfo">{name}</td>
                            </tr>
                            <tr>
                                <td class="rightLeftInfo">
                                    <div class="roundBox">생년월일</div>
                                </td>
                                <td class="rightRightInfo">{birth}</td>
                            </tr>
                            <tr>
                                <td class="rightLeftInfo">
                                    <div class="roundBox">주소</div>
                                </td>
                                <td class="rightRightInfo">{adress}</td>
                            </tr>
                            <tr>
                                <td class="rightLeftInfo">
                                    <div class="roundBox">연락처</div>
                                </td>
                                <td class="rightRightInfo">{contact}</td>
                            </tr>
                            <tr>
                                <td class="rightLeftInfo">
                                    <div class="roundBox">이메일</div>
                                </td>
                                <td class="rightRightInfo">{email}</td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
        </div>

        <div class="infoBox">
            <table class="infoTable">
                <tr>
                    <td class="leftInfoSide">최종<br>학력사항</td>
                    <td class="rightInfoSide">
                        <table class="infoTable">
                            <tr>
                                <td class="rightLeftInfo">
                                    <div class="roundBox">학교명</div>
                                </td>
                                <td class="rightRightInfo">{schoolName}</td>
                            </tr>
                            <tr>
                                <td class="rightLeftInfo">
                                    <div class="roundBox">전공</div>
                                </td>
                                <td class="rightRightInfo">{major}</td>
                            </tr>
                            <tr>
                                <td class="rightLeftInfo">
                                    <div class="roundBox">입학연도</div>
                                </td>
                                <td class="rightRightInfo">{admissionYear}</td>
                            </tr>
                            <tr>
                                <td class="rightLeftInfo">
                                    <div class="roundBox">졸업연도</div>
                                </td>
                                <td class="rightRightInfo">{graduateYear}</td>
                            </tr>
                            <tr>
                                <td class="rightLeftInfo">
                                    <div class="roundBox">학점</div>
                                </td>
                                <td class="rightRightInfo">{gradePoint}</td>
                            </tr>                            
                        </table>
                    </td>
                </tr>
            </table>
        </div>

        <div class="infoBox">
            <table class="infoTable">
                <tr>
                    <td class="leftInfoSide">자격증</td>
                    <td class="rightInfoSide">
                        <table class="infoTable">
                            <tr>
                                <td class="rightLeftInfo">
                                    <div class="roundBox">자격증명</div>
                                </td>
                                <td class="rightRightInfo">{licenseName}</td>
                            </tr>
                            <tr>
                                <td class="rightLeftInfo">
                                    <div class="roundBox">취득연도</div>
                                </td>
                                <td class="rightRightInfo">{date}</td>
                            </tr>
                            <tr>
                                <td class="rightLeftInfo">
                                    <div class="roundBox">인증기관</div>
                                </td>
                                <td class="rightRightInfo">{agency}</td>
                            </tr>
                            <tr>
                                <td style="padding-top:5px; padding-bottom:5px;" colspan="2"><div class="infoLineSub"></div></td>
                            </tr>
                            <tr>
                                <td class="rightLeftInfo">
                                    <div class="roundBox">자격증명</div>
                                </td>
                                <td class="rightRightInfo">{licenseName}</td>
                            </tr>
                            <tr>
                                <td class="rightLeftInfo">
                                    <div class="roundBox">취득연도</div>
                                </td>
                                <td class="rightRightInfo">{date}</td>
                            </tr>
                            <tr>
                                <td class="rightLeftInfo">
                                    <div class="roundBox">수학진흥원</div>
                                </td>
                                <td class="rightRightInfo">{agency}</td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
        </div>
    </section>

    <section class="page">
        <div id="topBackground2p"><p id="logo">12쉽소</p> </div>
        <br>
        <br>
        <br>
        <br>
        <div class="infoBox">
            <table class="infoTable">
                <tr>
                    <td class="leftInfoSide">경력사항</td>
                    <td class="rightInfoSide">
                        <table>
                            <tr>
                                <td>
                                    <p class="career"> <span class="roundBoxinText">{place}</span> <span class="roundBoxinText">{team}</span>에서 
                                        <span class="roundBoxinText">{periodStart}</span>부터 <span class="roundBoxinText">{periodEnd}</span>까지 
                                        <span class="roundBoxinText">{periodYears}</span>동안 <span class="roundBoxinText">{task}</span> 업무를 맡았어요. </p>
                                </td>
                            </tr>
                            <tr>
                                <td style="padding-top:5px; padding-bottom:5px;" colspan="2"><div class="infoLineSub"></div></td>
                            </tr>
                            <tr>
                                <td>
                                    <p class="career"> <span class="roundBoxinText">{place}</span> <span class="roundBoxinText">{team}</span>에서 
                                        <span class="roundBoxinText">{periodStart}</span>부터 <span class="roundBoxinText">{periodEnd}</span>까지 
                                        <span class="roundBoxinText">{periodYears}</span>동안 <span class="roundBoxinText">{task}</span> 업무를 맡았어요. </p>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
        </div>
        <br>
        <br>
        <br>
        <div class="infoBox">
            <table class="infoTable">
                <tr>
                    <td class="leftInfoSide">자기소개</td>
                    <td class="rightInfoSide">
                        <p class="paragraph"> {introductionText} </p>
                    </td>
                </tr>
            </table>
        </div>
        <p align="center" id="signature"> 상기 내용이 <span class="eb">사실임을 확인</span>합니다.&nbsp &nbsp {name} &nbsp &nbsp (서명) </p>
    </section>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.3.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.3.2/html2canvas.min.js"></script>

<script>
    function downloadPDF() {
        const pages = document.querySelectorAll('.page');
        const doc = new jspdf.jsPDF('p', 'mm', 'a4');
    
        let promises = [];
    
        pages.forEach((page, index) => {
            promises.push(
                html2canvas(page, {
                    scale: 3, // 해상도를 높여서 렌더링
                    useCORS: true // 크로스 오리진 이슈 해결
                }).then((canvas) => {
                    const imgData = canvas.toDataURL('image/png');
                    const imgWidth = 210; // A4 width in mm
                    const pageHeight = 297; // A4 height in mm
                    const imgHeight = canvas.height * imgWidth / canvas.width;
    
                    if (index > 0) {
                        doc.addPage();
                    }
                    doc.addImage(imgData, 'PNG', 0, 0, imgWidth, imgHeight);
                })
            );
        });
    
        Promise.all(promises).then(() => {
            doc.save('sample.pdf');
        });
    }
</script>
</html>
